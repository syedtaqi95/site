---
import Layout from "@/layouts/Layout.astro";
import clsx from "clsx";
import { getCollection } from "astro:content";
import BlogTag from "@/components/shared/BlogTag";

const blogEntries = await getCollection("blog");
---

<Layout title="Syed Taqi Haider | Blog">
  <article>
    <h2
      class={clsx(
        "font-sans text-3xl font-semibold my-12",
        "after:block after:relative after:-top-5 after:ml-24",
        "after:max-w-full after:h-0.5",
        "after:bg-gradient-to-r after:from-blue-500 after:to-fuchsia-600",
        "after:-z-10"
      )}
    >
      Blog
    </h2>
    <section class="flex flex-col gap-8 pb-20">
      {
        blogEntries
          // @ts-ignore
          .sort((a, b) => b.data.published - a.data.published) // newest first
          .map((entry) => (
            <a href={`/blog/${entry.slug}`}>
              <div
                class={clsx(
                  "p-4 rounded-xl border border-slate-200 dark:border-light-navy",
                  "hover:bg-slate-100 dark:hover:bg-light-navy group",
                  "hover:border-teal-700 dark:hover:border-green-350",
                  "transition-transform duration-300 hover:scale-105"
                )}
              >
                <h3 class="font-sans font-bold text-xl group-hover:text-teal-700 group-hover:dark:text-green-350">
                  {entry.data.title}
                </h3>

                <p class="italic text-sm">
                  {entry.data.published.toDateString()}
                </p>

                <ul class="flex flex-wrap gap-2">
                  {entry.data.tags.map((tag) => (
                    <BlogTag text={tag} />
                  ))}
                </ul>

                <p class="mt-8">{entry.data.description}</p>
              </div>
            </a>
          ))
      }
    </section>
  </article>
</Layout>
